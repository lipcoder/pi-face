services:
  pi-face:
    build: .
    container_name: pi-face
    restart: unless-stopped

    environment:
      # 容器里统一用 /data，方便和 config.py 对齐
      DATA_ROOT: /data

      # MJPEG HTTP 服务配置
      HTTP_HOST: "0.0.0.0"
      HTTP_PORT: "5000"

    ports:
      - "5000:5000"   # 对外暴露 MJPEG / snapshot

    volumes:
      # 你的数据卷：可以是宿主机 /data，也可以是项目下 ./data，看你习惯
      - $HOME/project/face/data:/data
      # 可选：缓存 InspireFace 模型，避免每次启动都重新下载
      - $HOME/project/face/inspireface-cache:/root/.inspireface

